---
title: 2018-3-27 安全
tags: 安全,SSL
grammar_cjkRuby: true
---
进行加密
## 12.1 身份认证和授权
**身份验证**通过检查用户名和密码是否正确.
**授权**是检查该级别用户是否具有访问权限.
例如,公共访问部分,注册用户部分,后台管理部分

**访问级别**称为**角色**.在部署时可通过模块分类和配置,使得每个模块只有特定的角色才能访问.这是通过部署声明安全约束描述符完成的-------"声明式安全".
在这个范围的另一端,内容限制是通过编程实现检验用户密码和数据库中存储的是否匹配.

声明式安全:安全约束不变入servlet
优点:编程更加简洁,容器负责身份验证和授权.
声明式可以在用户名和密码被发送到服务器前由浏览器加密后再发送给服务器
缺点:只能使用一个默认登录对话框

跳过

## 12.2.1 基于表单的验证
由于发送明文必须与SSL配合使用

一个登录界面,一个错误界面
使用form-based authentication(基于表单的身份验证)
auth-method元素值必须是FORM,
login-config必须有form-login-config元素节点,该节点有两个子元素
form-login-page,form-error-page.
```xml
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0"
>
    <!-- restricts access to JSP pages-->
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>JSP pages</web-resource-name>
            <url-pattern>*.jsp</url-pattern>
        </web-resource-collection>
        <!-- must have auth-constraint, otherwise the
            specified web resources will not be restricted -->
        <auth-constraint/>
    </security-constraint>

    <security-constraint>
        <web-resource-collection>
            <web-resource-name>Servlet1</web-resource-name>
            <url-pattern>/servlet1</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <role-name>member</role-name>
            <role-name>manager</role-name>
        </auth-constraint>
    </security-constraint>
    
    <login-config>
        <auth-method>FORM</auth-method>
        <form-login-config>
            <form-login-page>/login.html</form-login-page>
            <form-error-page>/error.html</form-error-page>
        </form-login-config>
    </login-config>
</web-app>
```